<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dokumentation - K√∂pa eller Hyra?</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PWQ0R13QTD"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-PWQ0R13QTD');
    </script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">üè† K√∂p eller Hyr</div>
            <ul class="nav-menu">
                <li><a href="index.html">Hem</a></li>
                <li><a href="calculator.html">Motsvarande Hyra</a></li>
                <li><a href="wealth-comparison.html">F√∂rm√∂genhetsj√§mf√∂relse</a></li>
                <li><a href="borrowing-capacity.html">L√•neutrymme</a></li>
                <li><a href="documentation.html" class="active">Dokumentation</a></li>
                <li><a href="about.html">Om verktyget</a></li>
            </ul>
        </div>
    </nav>

    <main class="container">
        <h2>Teknisk dokumentation</h2>
        <p class="lead">
            H√§r f√∂rklaras de matematiska formlerna och ber√§kningarna som anv√§nds i kalkylatorn.
        </p>

        <div class="content-section">
            <h3>√ñversikt</h3>
            <p>
                Kalkylatorn ber√§knar den <strong>totala kostnaden f√∂r att k√∂pa</strong> en bostad och hittar sedan den
                <strong>motsvarande m√•nadshyra</strong> som skulle ge samma totalkostnad. Detta g√∂r det m√∂jligt att
                j√§mf√∂ra √§pplen med √§pplen n√§r du √∂verv√§ger att k√∂pa eller hyra.
            </p>
        </div>

        <div class="content-section">
            <h3>L√•neutrymme-kalkylatorn</h3>
            <p>
                L√•neutrymme-kalkylatorn visar hur mycket du kan l√•na baserat p√• hush√•llets inkomst,
                r√§nta och amortering. Den j√§mf√∂r 15% vs 10% kontantinsatskrav f√∂r att visa effekten
                av ett s√§nkt krav.
            </p>
            <p>
                <a href="borrowing-capacity.html">√ñppna L√•neutrymme-sidan ‚Üí</a>
            </p>
            <p>
                Direktl√§nk till kalkylatorn:
                <a href="https://claesbackman.shinyapps.io/MaxLan/" target="_blank">https://claesbackman.shinyapps.io/MaxLan/</a>
            </p>
        </div>

        <div class="content-section">
            <h3>Totala kostnaden f√∂r att k√∂pa</h3>
            <p>Den totala kostnaden f√∂r att k√∂pa best√•r av fyra komponenter:</p>
            <div class="formula-box">
                \[ K_{tot,k√∂pa} = K_{init} + K_{l√∂p} + AK_{k√∂pa} - V_{k√∂pa} \]
            </div>

            <h4>1. Initiala kostnader (K<sub>init</sub>)</h4>
            <p>De kostnader du har fr√•n start:</p>
            <div class="formula-box">
                \[ K_{init} = P \times k_i + F \]
            </div>
            <p>d√§r:</p>
            <ul>
                <li><strong>P</strong> = Bostadspris</li>
                <li><strong>k<sub>i</sub></strong> = Kontantinsats (i procent, t.ex. 0.15 f√∂r 15%)</li>
                <li><strong>F</strong> = Flyttkostnader och besiktningar</li>
            </ul>

            <h4>2. L√∂pande kostnader (K<sub>l√∂p</sub>)</h4>
            <p>De √•terkommande kostnaderna under hela perioden:</p>
            <div class="formula-box">
                \[ K_{l√∂p} = R + N + (A + Fs + K_a) \times 12 \times t \]
            </div>
            <p>d√§r:</p>
            <ul>
                <li><strong>R</strong> = Totala r√§ntekostnader (ber√§knas separat med skatteavdrag)</li>
                <li><strong>N</strong> = Renoveringskostnader (procent av pris per √•r √ó t)</li>
                <li><strong>A</strong> = M√•nadsavgift till f√∂rening</li>
                <li><strong>Fs</strong> = F√∂rs√§kring per m√•nad</li>
                <li><strong>K<sub>a</sub></strong> = Andra m√•nadskostnader</li>
                <li><strong>t</strong> = Tid i √•r</li>
            </ul>

            <h4>R√§ntekostnad med skatteavdrag</h4>
            <p>Svensk lagstiftning ger 30% skattereduktion p√• 70% av r√§ntekostnaden:</p>
            <div class="formula-box">
                \[ r_{eff} = r \times 0.7 \]
                \[ R = r_{eff} \times \left( S \times t - S \times \frac{a \times (t-1) \times t}{2} \right) \]
            </div>
            <p>d√§r:</p>
            <ul>
                <li><strong>r</strong> = Nominell bol√•ner√§nta</li>
                <li><strong>r<sub>eff</sub></strong> = Effektiv r√§nta efter skatt</li>
                <li><strong>S</strong> = Skuld = P √ó (1 - k<sub>i</sub>)</li>
                <li><strong>a</strong> = Amortering (i procent av skuld per √•r)</li>
            </ul>

            <h4>3. Alternativkostnader (AK<sub>k√∂pa</sub>)</h4>
            <p>Avkastning du g√•r miste om genom att inte investera pengarna:</p>
            <div class="formula-box">
                \[ AK_{k√∂pa} = (P \times k_i + F) \times [(1 + r_s)^t - 1] + B \times \frac{(1+r_s)^t - 1}{r_s} - B \times t \]
            </div>
            <p>d√§r:</p>
            <ul>
                <li><strong>r<sub>s</sub></strong> = F√∂rv√§ntad avkastning p√• investeringar</li>
                <li><strong>B</strong> = √Örliga betalningar (amortering + avgifter + renovering)</li>
            </ul>

            <h4>4. Kapitalvinster (V<sub>k√∂pa</sub>)</h4>
            <p>Vinst fr√•n huspris√∂kning, efter skatt:</p>
            <div class="formula-box">
                \[ V_{k√∂pa} = (P_{slut} - P) - (P_{slut} - P - N) \times \frac{22}{30} \times 0.3 + P \times k_i \]
            </div>
            <p>d√§r:</p>
            <ul>
                <li><strong>P<sub>slut</sub></strong> = P √ó (1 + g<sub>p</sub>)<sup>t</sup> (slutligt husv√§rde)</li>
                <li><strong>g<sub>p</sub></strong> = √Örlig huspris√∂kning</li>
                <li>22/30 av vinsten √§r skattepliktig</li>
                <li>30% skatt p√• den skattepliktiga delen</li>
                <li>Renoveringar minskar skattepliktig vinst</li>
                <li>Kontantinsats √•terf√•s skattefritt</li>
            </ul>
        </div>

        <div class="content-section">
            <h3>Motsvarande hyra</h3>
            <p>
                Kalkylatorn ber√§knar vilken m√•nadshyra (h‚ÇÅ) som skulle ge samma totalkostnad som att k√∂pa.
                Detta kr√§ver att vi l√∂ser f√∂r h‚ÇÅ i ekvationen:
            </p>
            <div class="formula-box">
                \[ K_{tot,k√∂pa} = K_{tot,hyra} \]
            </div>

            <h4>Totala kostnaden f√∂r hyra</h4>
            <div class="formula-box">
                \[ K_{tot,hyra} = K_{init,h} + K_{l√∂p,h} + AK_{hyra} - V_{hyra} \]
            </div>

            <h4>Komponenter f√∂r hyra:</h4>
            <p><strong>Initiala kostnader:</strong></p>
            <div class="formula-box">
                \[ K_{init,h} = h_1 \times d \]
            </div>
            <p>d√§r d = deposition i m√•nader</p>

            <p><strong>L√∂pande kostnader:</strong></p>
            <div class="formula-box">
                \[ K_{l√∂p,h} = h_1 \times 12 \times \frac{(1 + g_h)^t - 1}{g_h} + H_a \times 12 \times t \]
            </div>
            <p>d√§r:</p>
            <ul>
                <li><strong>g<sub>h</sub></strong> = √Örlig hyres√∂kning</li>
                <li><strong>H<sub>a</sub></strong> = Andra hyreskostnader per m√•nad</li>
            </ul>

            <p><strong>Alternativkostnader f√∂r hyra:</strong></p>
            <div class="formula-box">
                \[ AK_{hyra} = h_1 \times 12 \times (1 + r_s) \times \frac{(1 + r_s)^t - (1 + g_h)^t}{r_s - g_h} - h_1 \times 12 \times \frac{(1 + g_h)^t - 1}{g_h} + d \times h_1 \times [(1 + r_s)^t - 1] \]
            </div>

            <p><strong>Vinster:</strong></p>
            <div class="formula-box">
                \[ V_{hyra} = 0 \]
            </div>
            <p>(Depositionen √•terf√•s och √§r redan hanterad i alternativkostnaderna)</p>

            <h4>L√∂sning f√∂r motsvarande hyra</h4>
            <p>N√§r r<sub>s</sub> ‚â† g<sub>h</sub>:</p>
            <div class="formula-box">
                \[ h_1 = \frac{(K_{tot,k√∂pa} - H_a \times 12 \times t) \times (r_s - g_h)}{12 \times (1+r_s) \times [(1+r_s)^t - (1+g_h)^t] + d \times [(1+r_s)^t - 1] \times (r_s - g_h)} \]
            </div>

            <p>N√§r r<sub>s</sub> ‚âà g<sub>h</sub> (anv√§nder L'H√¥pital's regel):</p>
            <div class="formula-box">
                \[ h_1 = \frac{K_{tot,k√∂pa} - H_a \times 12 \times t}{12 \times t} \]
            </div>
        </div>

        <div class="content-section">
            <h3>Specialfall och korrigeringar</h3>

            <h4>Fall 1: Standard (r<sub>s</sub> ‚â† g<sub>h</sub>)</h4>
            <p>
                Detta √§r det vanligaste fallet d√§r investeringsavkastning och hyres√∂kning skiljer sig √•t.
                Formeln anv√§nder v√§xande annuitetsber√§kningar.
            </p>

            <h4>Fall 2: Lika tillv√§xttakt (r<sub>s</sub> ‚âà g<sub>h</sub>)</h4>
            <p>
                N√§r avkastning och hyres√∂kning √§r lika uppst√•r division med noll. Vi anv√§nder L'H√¥pital's regel
                f√∂r att ber√§kna gr√§nsv√§rdet, vilket ger en f√∂renklad formel.
            </p>

            <h4>Fall 3: Ingen hyres√∂kning (g<sub>h</sub> = 0)</h4>
            <p>
                N√§r hyran √§r konstant blir det en standardannuitet med lika betalningar varje √•r.
            </p>

            <h4>Viktiga korrigeringar</h4>
            <p><strong>Depositionens alternativkostnad:</strong></p>
            <p>Korrigerad formel:</p>
            <div class="formula-box">
                \[ AK_{dep} = d \times h_1 \times [(1 + r_s)^t - 1] \]
            </div>
            <p>
                Tidigare version hade ett fel som √∂verskattade alternativkostnaden med (d-1) √ó h‚ÇÅ kronor.
            </p>
        </div>

        <div class="content-section">
            <h3>Parametrar och standardv√§rden</h3>
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: var(--bg-light);">
                        <th style="padding: 1rem; text-align: left; border: 1px solid #ddd;">Parameter</th>
                        <th style="padding: 1rem; text-align: left; border: 1px solid #ddd;">Standardv√§rde</th>
                        <th style="padding: 1rem; text-align: left; border: 1px solid #ddd;">Beskrivning</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 1rem; border: 1px solid #ddd;">Bostadspris</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">1 000 000 kr</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">Totalt pris f√∂r bostaden</td>
                    </tr>
                    <tr>
                        <td style="padding: 1rem; border: 1px solid #ddd;">Kontantinsats</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">15%</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">Minsta krav f√∂r bostadsr√§tt</td>
                    </tr>
                    <tr>
                        <td style="padding: 1rem; border: 1px solid #ddd;">Bol√•ner√§nta</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">3%</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">Nominell r√§nta f√∂re skatt</td>
                    </tr>
                    <tr>
                        <td style="padding: 1rem; border: 1px solid #ddd;">Amortering</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">2%</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">Procent av skuld per √•r</td>
                    </tr>
                    <tr>
                        <td style="padding: 1rem; border: 1px solid #ddd;">Tid</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">10 √•r</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">Tidshorisont</td>
                    </tr>
                    <tr>
                        <td style="padding: 1rem; border: 1px solid #ddd;">Huspris√∂kning</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">3%</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">√Örlig pris√∂kning</td>
                    </tr>
                    <tr>
                        <td style="padding: 1rem; border: 1px solid #ddd;">Hyres√∂kning</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">2%</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">√Örlig hyresh√∂jning</td>
                    </tr>
                    <tr>
                        <td style="padding: 1rem; border: 1px solid #ddd;">Investeringsavkastning</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">7%</td>
                        <td style="padding: 1rem; border: 1px solid #ddd;">F√∂rv√§ntad √•rlig avkastning</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="content-section">
            <h3>Antaganden och begr√§nsningar</h3>
            <ul>
                <li><strong>Skatteregler:</strong> Anv√§nder svenska regler f√∂r r√§nteavdrag och kapitalvinstskatt</li>
                <li><strong>R√§nteavdrag:</strong> 30% reduktion p√• 70% av r√§ntan (effektivt 21% av r√§ntan)</li>
                <li><strong>Kapitalvinstskatt:</strong> 22/30 av vinsten beskattas med 30% (effektivt 22% skatt)</li>
                <li><strong>Konstanta r√§ntor:</strong> Antar att bol√•ner√§nta och investeringsavkastning √§r konstanta</li>
                <li><strong>Linj√§r amortering:</strong> Amorterar samma procentandel av ursprunglig skuld varje √•r</li>
                <li><strong>Ingen inflation:</strong> Alla belopp i dagens penningv√§rde</li>
                <li><strong>Inga transaktionskostnader:</strong> Bortser fr√•n m√§klararvoden och andra avgifter vid f√∂rs√§ljning</li>
            </ul>
        </div>

        <div class="content-section">
            <h3>Referenser</h3>
            <ul>
                <li><a href="https://www.skatteverket.se/privat/skatter/vardepapper/forsaljningavbostad.4.18e1b10334ebe8bc8000117.html" target="_blank">Skatteverket - F√∂rs√§ljning av bostad</a></li>
                <li><a href="https://www.skatteverket.se/privat/skatter/beloppochprocent/skattereduktioner.4.2b543913a42158acf800021248.html" target="_blank">Skatteverket - R√§nteavdrag</a></li>
                <li><a href="https://www.fi.se/sv/vara-register/amorteringskrav/" target="_blank">Finansinspektionen - Amorteringskrav</a></li>
            </ul>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>K√∂p eller Hyr</h4>
                <p>En finansiell kalkylator f√∂r bostadsbeslut</p>
            </div>
            <div class="footer-section">
                <h4>Verktyg</h4>
                <ul>
                    <li><a href="calculator.html">Motsvarande Hyra</a></li>
                    <li><a href="wealth-comparison.html">F√∂rm√∂genhetsj√§mf√∂relse</a></li>
                    <li><a href="borrowing-capacity.html">L√•neutrymme</a></li>
                    <li><a href="documentation.html">Dokumentation</a></li>
                    <li><a href="about.html">Om verktyget</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Utvecklare</h4>
                <p>Designad av <a href="https://sites.google.com/view/claesbackman/home" target="_blank">Claes B√§ckman</a></p>
                <p><a href="https://github.com/claesbackman/Verktyg" target="_blank">GitHub</a></p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 K√∂p eller Hyr. Anv√§nd p√• egen risk.</p>
        </div>
    </footer>
</body>
</html>
